syntax = "proto3";

package broadcast;

// Enums

enum GoldLocation {
  kInventory = 0;
  kStorage = 1;
  kGuildStorage = 2;
}

// Sub-structures

message Position {
  uint32 regionId = 1;
  float x = 2;
  float y = 3;
}

// Messages

message CharacterHpUpdate {
  uint32 currentHp = 1;
}

message CharacterMpUpdate {
  uint32 currentMp = 1;
}

message CharacterMaxHpMpUpdate {
  uint32 maxHp = 1;
  uint32 maxMp = 2;
}

message CharacterLevelUpdate {
  int32 level = 1;
  int64 expRequired = 2;
}

message CharacterExperienceUpdate {
  uint64 currentExperience = 1;
  uint32 currentSpExperience = 2;
}

message CharacterSpUpdate {
  uint32 skillPoints = 1;
}

message CharacterNameUpdate {
  string name = 1;
}

message GoldAmountUpdate {
  uint64 goldAmount = 1;
  GoldLocation goldLocation = 2;
}

message RegionNameUpdate {
  string name = 1;
}

message MovementBegan {
  Position currentPosition = 1;
  oneof destination {
    Position destinationPosition = 2;
    uint32 destinationAngle = 3;
  }
  float speed = 4;
}

message MovementEnded {
  Position currentPosition = 1;
}

// Broadcast message

message BroadcastMessage {
  oneof body {
    CharacterHpUpdate characterHpUpdate = 1;
    CharacterMpUpdate characterMpUpdate = 2;
    CharacterMaxHpMpUpdate characterMaxHpMpUpdate = 3;
    CharacterLevelUpdate characterLevelUpdate = 4;
    CharacterExperienceUpdate characterExperienceUpdate = 5;
    CharacterSpUpdate characterSpUpdate = 6;
    CharacterNameUpdate characterNameUpdate = 7;
    GoldAmountUpdate goldAmountUpdate = 8;
    MovementBegan movementBegan = 9;
    MovementEnded movementEnded = 10;
    RegionNameUpdate regionNameUpdate = 11;
  }
}